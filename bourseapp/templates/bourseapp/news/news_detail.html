<!-- use base html template -->
{% extends 'bourseapp/base.html' %}
{% load jalali_tags %}
{% load social_share %}
{% block title %}
    <title>خبر {{ news.title }}</title>

    <meta name="description" content="{{ news.shortDescription|truncatechars:120 }}"/>
    <meta property="og:locale" content="fa_IR" />
    <meta property="og:type" content="news" />
    <meta property="og:title" content="{{ news.title }}" />
    <meta property="og:description" content="{{ news.shortDescription|truncatechars:120 }}" />
    <meta property="og:url" content="{{ request.get_host }}{% url 'bourseapp:news-detail' news.id %}"/>
    <meta property="og:site_name" content="مدیابورس" />
    {% if news.pic %}
        <meta property="og:image" content="{{ request.get_host }}{{ news.pic.url }}" />
    {% endif %}
    <meta property="article:tag" content="بورس" />
    <meta property="article:tag" content="اخبار بورس" />
    <meta property="article:tag" content="بورس تهران" />

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:description" content="{{ news.shortDescription|truncatechars:120 }}" />
    <meta name="twitter:title" content="{{ news.title }}" />
    {% if news.pic %}
        <meta name="twitter:image" content="{{ request.get_host }}{{ news.pic.url }}" />
    {% endif %}

{% endblock %}

    <!-- load static file in django -->
    {% load staticfiles %}

{% block javascript %}
    <script type="text/javascript" src="{% static 'bourseapp/js/news_detail.js' %}"></script>
{% endblock %}

<!-- begin of body block -->
{% block body %}


    <!-- Material Design Bootstrap table -->
    <link rel="stylesheet" href="{% static 'bourseapp/css/addons/datatables.min.css' %}"><!-- MDBootstrap Datatables  -->
    <!-- Material Design Bootstrap table -->
    <link rel="stylesheet" href="{% static 'bourseapp/css/addons/datatables-select.min.css' %}"><!-- MDBootstrap Datatables  -->

    <div class="container my-5 py-5 z-depth-1">

        <!--Section: Content-->
        <section class="px-md-5 mx-md-5 dark-grey-text text-center text-lg-left">

            <!--Grid row-->
            <div class="row">

                <!--Grid column-->
                <div class="col-lg-6 mb-4 mb-lg-0 ">

                    <h3 class="font-weight-bold text-right">{{ news.company.fullName }} ({{ news.company.symbol }})</h3>

                    <p class="font-weight-bold text-right">{{ news.title }} - {{ news.createAt|to_jalali:'%y/%m/%d' }}

                    <span class="badge badge-secondary  float-left"><small>{{ news.user }}</small></span>

                    <a href="{% url 'admin:bourseapp_news_change'  news.id %}" target="_blank"><i class="fa fa-edit"></i></a>

                        {% if news.isApproved == False %}
{#                            <a href="{% url 'bourseapp:news-approve'  news.id %}" target="_blank"><span class="small badge-pill mr-0 red " style="color: white">تایید نشده</span></a>#}
                            <a id="news-approve-status" data-toggle="modal" data-target="#modalNewsApprove"><span class="small badge-pill mr-0 red " style="color: white">تایید نشده</span></a>
                        {% endif %}
                    </p>

                    <div class="row mr-1">
                        {% post_to_telegram news.title url '<i class="fab fa-telegram fa-lg "></i>' %}
                        {% post_to_twitter  news.title url '<i class="fab fa-twitter fa-lg mr-2"></i>' %}
                        <a data-toggle="tooltip" title="فعال در موبایل ها" href="whatsapp://send?text=http://{{ request.get_host }}{{url}}  {{ news.title }}" data-action="share/whatsapp/share">
                            <i class="fab fa-whatsapp fa-lg mr-2"></i>
                        </a>
                    </div>


{#                    {{ news.description | safe }}#}
{#                    <textarea class="form-control border-0 disabled text-muted" rows="5">#}
{#                        {{ news.description }}#}
{#                    </textarea>#}

                    <a href="{{ news.reference }}" target="_blank"><i class="fa fa-link"><span style="font-family: IRANSans"> مرجع  </span></i></a>
{#                    <p class="mt-2"><span class="badge badge-info  float-left">{{ news.tag }}</span></p>#}
                    <p class="mt-2"><span class="badge badge-info  float-left">{{ news.tag }}</span></p>

                </div>
                <!--Grid column-->

                <!--Grid column-->
                <div class="col-lg-6 mb-4 mb-lg-0 d-flex align-items-center justify-content-center">

                    {% if news.pic %}
                        <a href="{{ news.pic.url }}" target="_blank">
                            <img src="{{ news.pic.url }}" class="img-fluid" alt="" style="width: 150px; height: 150px; object-fit: cover">
                        </a>
                    {% else %}
                        <img src="{% static 'bourseapp/images/news.png' %}" class="img-fluid" alt="" style="width: 150px; height: 150px; object-fit: cover">
                    {% endif %}

                </div>
                <!--Grid column-->

            </div>
            <!--Grid row-->

            <hr>
            <p class="text-muted text-right text-justify" dir="rtl">{{ news.description | safe  }}</p>


        </section>
        <!--Section: Content-->

    </div>

    <!-- base url address -->
    <input type="hidden" id="url-base" data-url="http://{{ request.get_host }}/" />
    <input type="hidden" id="url-news-approve" data-url="{% url 'bourseapp:news-approve' news.id%}" />



    <!-- Modal for approve news -->
    <div class="modal fade" id="modalNewsApprove" tabindex="-1" role="dialog" aria-labelledby="modalNewsApproveLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-right" id="modalNewsApproveLabel">تایید خبر</h5>
                </div>
                <div class="modal-body">
                    آیا از حذف خبر
                    <strong style="font-weight: bold">"{{ news.title }}"</strong>
                      مطمئنید؟
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">لغو</button>
                    <button onclick="newsApproveByAdmin()" type="button" class="btn btn-primary">تایید</button>
                </div>
            </div>
        </div>
    </div>

{% endblock %}